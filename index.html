<!DOCTYPE html>
<html>

<script src="js/jquery/1.10.2/jquery-1.10.2.min.js"></script>
<script src="js/jquery/1.10.3/jquery-ui.min.js"></script>


<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />



<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>



<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet' />
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-minimap/v1.0.0/Control.MiniMap.css' rel='stylesheet' />

<script src="js/jQRangeSlider/lib/jquery.mousewheel.min.js"></script>
<script src="js/jQRangeSlider/jQRangeSlider-min.js"></script>
<script src="js/jQRangeSlider/jQDateRangeSlider-min.js"></script>
<link rel="stylesheet" id="themeCSS" href="js/jQRangeSlider/css/classic.css">

<script src="js/jquery-sparql/jquery.sparql.js"></script>

<script src="js/constants.js"></script>
<script src="js/query.js"></script>
<script src="js/map.js"></script>
<script src="js/util.js"></script>
<script src="js/slider.js"></script>
<script src="js/Window.js"></script>
<script src="js/FilterResults.js"></script>

<!--
<link rel="stylesheet" href="css/historicmaps.css" />
<link href="css/styles.css" rel="stylesheet">
<link href="css/skins/line/aero.css" rel="stylesheet">
<script src="js/icheck.js"></script>

  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Fira+Sans">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.css">



-->
<link rel="stylesheet" href="css/bootstrap.min.css" />
<link href="css/historicmaps-style.css" rel="stylesheet">

<style>

.menu-ui {
  background:#fff;
  position:absolute;
  top:10px;right:10px;
  z-index:1;
  border-radius:3px;
  width:120px;
  border:1px solid rgba(0,0,0,0.4);
  }
  .menu-ui a {
    font-size:13px;
    color:#404040;
    display:block;
    margin:0;padding:0;
    padding:5px 10px;
    text-decoration:none;
    border-bottom:1px solid rgba(0,0,0,0.25);
    text-align:center;
    }
    .menu-ui a:first-child {
      border-radius:3px 3px 0 0;
      }
    .menu-ui a:last-child {
      border:none;
      border-radius:0 0 3px 3px;
      }
    .menu-ui a:hover {
      background:#f8f8f8;
      color:#404040;
      }
    .menu-ui a.active {
      background:#3887BE;
      color:#FFF;
      }
      .menu-ui a.active:hover {
        background:#3074a4;
        }
</style>

<html>
<head>
	<title>Historic Maps Search</title>	
</head>
<body onLoad="javascript:init();">

	<div id ="main">
		
		<div id="header">			
			<div id="logox"><img height="85" width="342" src="http://www.ulb.uni-muenster.de/imperia/md/images/allgemein/farbunabhaengig/wwu.svg" alt="ulb_logo"><br></div>
			
			<div id="search">
        
        
          <input type="text" size="50 "id="searchField" class="form-control" placeholder="What are you looking for?">
  				<input id="searchButton" class="btn btn-default dropdown-toggle" type="button" name="btnSearch" value="Search"  onclick="executeQuery(0)">
          <br>
							
				  <div id="slider"></div>	

			</div>
	    
      <div id="logoy">.</div>

		</div>


    
    <div id="toolbar">
        <div id="mapheader">.</div>
        <div id="status"><span id="status"></span></div>
        
    </div>
    
		
    <div id="display">
				
			<div id="properties">

				<b><br></b><button id="btnProperties" onclick="executeQuery(0)" class="btn btn-default dropdown-toggle">Set Properties</button><br><br><br>

			</div>
			<div id="map">

				<nav class='menu-ui'>
				  <a href='#' id='showProperties' value="show" class='active'>Show Properties</a>
				  <a href='#' id='selectArea' value="set" class='active' >Select Area</a>
				  <a href='#' id='automaticZoom' value="on" class='active' >Automatic Zoom</a>
				</nav>

			</div>





			<div id="listContainer" >
				
				<div id="result" ></div>
				<div id="next"></div>
			</div>	


		</div>
	</div>






<script type="text/javascript">


$('#automaticZoom').on('click', function(){
  
    if($("#automaticZoom").attr("value")=="on") {

    	$("#automaticZoom").attr('value', 'off');
    	$("#automaticZoom").addClass('').removeClass('active');

    } else {

    	$("#automaticZoom").attr('value', 'on');
    	$("#automaticZoom").addClass('active').removeClass('');
    }
    
});

$('#showProperties').on('click', function(){
  
    if($("#showProperties").attr("value")=="show") {

    	$("#showProperties").addClass('').removeClass('active');
    	$("#showProperties").attr('value', 'hide');
    	$('#properties').css("display", "block");	
    	$('#map').css("width", "63%");	
		$("#showProperties").html('Hide Properties');


    } else {

		$("#showProperties").addClass('active').removeClass('');
		$("#showProperties").attr('value', 'show');
		$('#map').css("width", "75%");	
		$("#showProperties").html('Show Properties');
    	$('#properties').css("display", "none");	

    }
    
});


$('#selectArea').on('click', function(){
    
    if($("#selectArea").attr("value")=="set") {

    	$("#selectArea").addClass('').removeClass('active');
    	$("#selectArea").attr('value', 'remove');
    	$("#selectArea").html('Remove Area');
    	setSpatiatConstraint();

    } else {

    	$("#selectArea").addClass('active').removeClass('');
    	$("#selectArea").attr('value', 'set');
    	$("#selectArea").html('Select Area');  
    	removeSpatiatConstraint();  	

    }
});




$( document ).ready(function() {


	setTemporalLimit();

	//$('#properties').css("display", "none");	

	//Loading RDF properties from file.
	$.get("rdf/historicmapsphen.rdf", function(xmlResponse){
		var rdfClasses = getRdfClasses(xmlResponse);
		var counter = 0;

		for(var i = 0; i < rdfClasses.length; i++){
			if(rdfClasses[i].children.length == 0){
				$("#properties").append("<p id='pOntologyContentTag" + counter +"'><input type='checkbox' id='" + rdfClasses[i].name + "' value='" + rdfClasses[i].uri + "'><label for 'pOntologyContentTag"+counter+"'>" + rdfClasses[i].name + '</label>' );				
				counter++;
			}
		}
	})

	//Creating list for query results.
	$("#result").append('<ul id="itemsContainer" style="list-style-type:none"></ul>');
	
  $('#properties').css("display", "none");	
	



});

$("body").on("change", ".chOntologyContent", function() {

	var res = new Array();
		$(".chOntologyContent").each(function( index ){
	if(this.checked){
		res.push(this.value);
	}
	});
	
	arrayCheckboxes=res;



  $('#btn-search').on('click', function(e) {

    e.preventDefault();
    $('#search').animate({width: 'toggle'}).focus();

  });



});


//Setting min and max values for the time slider.
$("#slider").bind("valuesChanged", function(e, data){
    //console.log("Values just changed. min: " + data.values.min + " max: " + data.values.max);

    maxVal = data.values.max;
    minVal = data.values.min;

    executeQuery(0);

});


$( window ).load(function() {
	console.log( "window loaded" );
});

//Firing the search button once ENTER is pressed on the search text field.
$("#searchField").keyup(function(event){

    if(event.keyCode == 13){
        $("#searchButton").click();
    }

})


</script>


</body>
</html>

